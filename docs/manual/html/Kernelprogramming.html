<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN" "http://www.w3.org/TR/REC-html40/loose.dtd">
<HTML>
<HEAD>
<META HTTP-EQUIV="Content-Type" CONTENT="text/html; CHARSET=utf-8">
<LINK REL="Start" HREF="index.html">
<LINK REL="Contents" HREF="toc.html">
<LINK REL="Prev" HREF="Startexecutionloop.html">
<LINK REL="Next" HREF="ConwaysGameofLifewithOpenCALCL.html">
<style type="text/css">code{white-space: pre;}</style>
  <style type="text/css">
div.sourceCode { overflow-x: auto; }
table.sourceCode, tr.sourceCode, td.lineNumbers, td.sourceCode {
  margin: 0; padding: 0; vertical-align: baseline; border: none; }
table.sourceCode { width: 100%; line-height: 100%; }
td.lineNumbers { text-align: right; padding-right: 4px; padding-left: 4px; color: #aaaaaa; border-right: 1px solid #aaaaaa; }
td.sourceCode { padding-left: 5px; }
code > span.kw { color: #007020; font-weight: bold; } /* Keyword */
code > span.dt { color: #902000; } /* DataType */
code > span.dv { color: #40a070; } /* DecVal */
code > span.bn { color: #40a070; } /* BaseN */
code > span.fl { color: #40a070; } /* Float */
code > span.ch { color: #4070a0; } /* Char */
code > span.st { color: #4070a0; } /* String */
code > span.co { color: #60a0b0; font-style: italic; } /* Comment */
code > span.ot { color: #007020; } /* Other */
code > span.al { color: #ff0000; font-weight: bold; } /* Alert */
code > span.fu { color: #06287e; } /* Function */
code > span.er { color: #ff0000; font-weight: bold; } /* Error */
code > span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
code > span.cn { color: #880000; } /* Constant */
code > span.sc { color: #4070a0; } /* SpecialChar */
code > span.vs { color: #4070a0; } /* VerbatimString */
code > span.ss { color: #bb6688; } /* SpecialString */
code > span.im { } /* Import */
code > span.va { color: #19177c; } /* Variable */
code > span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code > span.op { color: #666666; } /* Operator */
code > span.bu { } /* BuiltIn */
code > span.ex { } /* Extension */
code > span.pp { color: #bc7a00; } /* Preprocessor */
code > span.at { color: #7d9029; } /* Attribute */
code > span.do { color: #ba2121; font-style: italic; } /* Documentation */
code > span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code > span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code > span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
  </style>
  <link rel="stylesheet" href="github-pandoc.css" type="text/css" />
  <script src="https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML" type="text/javascript"></script>
</HEAD>
<BODY>
<A HREF="toc.html">Contents</A>
<A HREF="Startexecutionloop.html">Previous</A>
<A HREF="ConwaysGameofLifewithOpenCALCL.html">Next</A>
<HR NOSHADE>
<H2 id="kernel-programming"><A NAME="8_4">Kernel programming</A></H2>
<P>In order to program kernels in OpenCAL, the user needs to include
 some header files. Specifically, cal2D.h or cal3D.h permit to use some
 simple functions to interact with the data structures belonging to the
 model. To create a kernel function in OpenCL, user must place the
 keyword <CODE>__kernel</CODE> before the returning the type of the
 function. In OpenCAL-CL every time a kernel function, the keyword <CODE>
MODEL_DEFINITION2D</CODE> must be specified as first parameter and the
 function <CODE>initThreads2D()</CODE> called as first instruction.
<BR> The code below shows how to declare a new kernel.</P>
<PRE><CODE>__kernel void kernel(MODEL_DEFINITION2D){ initThreads2D(); ...  ...
    ...  }</CODE></PRE>
<P>When the user implements an elementary process - by defining its
 kernel function - she/he can rely on a set of OpenCAL functions that
 allow to get the substates values of both the central and the
 neighbouring cells, and to update the substates values of the central
 cell. Every time the user wants to use this function, the keyword <CODE>
MODEL2D</CODE> must be passed as first parameter. For instance, if we
 want to retrieve the value of a specific cell we need to use the
 function <CODE>calGet2Dr</CODE>.</P>
<PRE> <CODE>double a = calGet2Dr(MODEL2D, 0, i, j);</CODE></PRE>
<P>The function returns the value of the cell (i, j) of the substate 0.
<BR> Since inside OpenCAL-CL one can use all OpenCL features, all memory
 levels such as global memory, local memory, private memory
 (XXXcitazione libroXXX) can be exploited. In order to use these memory
 levels, variables must be declared using this specific syntax
 respectively <CODE>__global</CODE>, <CODE>__local</CODE>, <CODE>
__private</CODE>.</P>
<HR NOSHADE>
<A HREF="toc.html">Contents</A>
<A HREF="Startexecutionloop.html">Previous</A>
<A HREF="ConwaysGameofLifewithOpenCALCL.html">Next</A>
</BODY>
</HTML>
